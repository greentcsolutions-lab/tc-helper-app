{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://yourapp.com/schemas/universal-classifier.schema.json",
  "title": "Universal U.S. Real Estate Page Classifier Output",
  "description": "One entry per image in batch order. Batch size always 1â€“20.",
  "type": "object",
  "properties": {
    "state": {
      "type": ["string", "null"],
      "description": "Two-letter state code if confidently detected (e.g., 'CA', 'TX'). Null if unknown."
    },
    "pages": {
      "type": "array",
      "minItems": 1,
      "maxItems": 20,
      "description": "Exactly one entry per image, in the same order as sent.",
      "items": {
        "oneOf": [
          {
            "type": "null",
            "description": "No recognizable standard form or key content"
          },
          {
            "type": "object",
            "properties": {
              "pdfPage": {
                "type": "integer",
                "minimum": 1
              },
              "state": {
                "type": ["string", "null"],
                "enum": ["CA","TX","FL","NY","IL","GA","CO","WA","AZ","NV", null]
              },
              "formCode": {
                "type": "string",
                "description": "Short code like 'RPA', 'TREC 20-16', 'FAR/BAR-6'"
              },
              "formRevision": {
                "type": ["string", "null"],
                "description": "e.g., '6/25', '11/2023'"
              },
              "formPage": {
                "type": ["integer", "null"]
              },
              "totalPagesInForm": {
                "type": ["integer", "null"]
              },
              "role": {
                "type": "string",
                "enum": [
                  "main_contract",
                  "counter_offer",
                  "addendum",
                  "disclosure",
                  "financing",
                  "signatures",
                  "broker_info",
                  "title_page",
                  "other",
                  "local_addendum"
                ]
              },
              "titleSnippet": {
                "type": "string",
                "maxLength": 120
              },
              "confidence": {
                "type": "integer",
                "minimum": 0,
                "maximum": 100
              },
              "contentCategory": {
                "type": "string",
                "enum": [
                  "core_terms",
                  "contingencies",
                  "financing_details",
                  "signatures",
                  "broker_info",
                  "counter_or_addendum",
                  "disclosures",
                  "boilerplate",
                  "other"
                ],
                "description": "Primary content type of this page based on visible filled fields and section headings"
              },
              "hasFilledFields": {
                "type": "boolean",
                "description": "True if page shows visible filled text, checkboxes, or handwriting"
              }
            },
            "required": ["pdfPage", "formCode", "role", "confidence", "contentCategory", "hasFilledFields"],
            "additionalProperties": false
          }
        ]
      }
    }
  },
  "required": ["state", "pages"],
  "additionalProperties": false
}