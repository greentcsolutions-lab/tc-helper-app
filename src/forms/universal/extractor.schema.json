{
  "name": "RealEstateFormPerPageExtractions",
  "strict": true,
  "schema": {
    "type": "object",
    "properties": {
      "extractions": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "buyerNames": {
              "type": ["array", "null"],
              "items": { "type": "string", "minLength": 1 },
              "minItems": 1,
              "maxItems": 6,
              "description": "Array of buyer full names"
            },
            "sellerNames": {
              "type": ["array", "null"],
              "items": { "type": "string" },
              "minItems": 1,
              "maxItems": 6,
              "description": "Array of seller full names"
            },
            "propertyAddress": {
              "type": ["string", "null"],
              "minLength": 10,
              "description": "Full property address"
            },
            "purchasePrice": {
              "type": ["number", "null"],
              "minimum": 0,
              "description": "Purchase price in USD"
            },
            "earnestMoneyDeposit": {
              "type": ["object", "null"],
              "properties": {
                "amount": { "type": ["number", "null"] },
                "holder": { "type": ["string", "null"] }
              },
              "description": "Earnest money details"
            },
            "closing": {
              "type": ["object", "null"],
              "properties": {
                "daysAfterAcceptance": {
                  "type": ["number", "null"],
                  "minimum": 0,
                  "description": "Number of days after acceptance until close of escrow (from RPA paragraph 3C). This is the primary driver in most contracts."
                },
                "specificDate": {
                  "type": ["string", "null"],
                  "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
                  "description": "Hard calendar close of escrow date ONLY if explicitly stated (e.g., in a counter offer). Format YYYY-MM-DD."
                }
              },
              "additionalProperties": false,
              "description": "Closing mechanics. Prefer daysAfterAcceptance unless a counter explicitly sets a calendar date."
            },
            "financing": {
              "type": ["object", "null"],
              "properties": {
                "isAllCash": { "type": ["boolean", "null"] },
                "loanType": { "type": ["string", "null"] },
                "loanAmount": { "type": ["number", "null"] }
              }
            },
            "contingencies": {
              "type": ["object", "null"],
              "properties": {
                "daysToClose": {
                  "type": ["number", "null"],
                  "minimum": 0,
                  "description": "DEPRECATED — use closing.daysAfterAcceptance instead. Kept temporarily for backward compatibility."
                },
                "inspectionDays": { "type": ["number", "string", "null"] },
                "appraisalDays": { "type": ["number", "string", "null"] },
                "loanDays": { "type": ["number", "string", "null"] },
                "saleOfBuyerProperty": { "type": ["boolean", "null"] }
              },
              "description": "Contingency periods. daysToClose is deprecated — migrate to closing.daysAfterAcceptance."
            },
            "closingCosts": {
              "type": ["object", "null"],
              "properties": {
                "buyerPays": { "type": ["array", "null"], "items": { "type": "string" } },
                "sellerPays": { "type": ["array", "null"], "items": { "type": "string" } },
                "sellerCreditAmount": { "type": ["number", "null"] }
              }
            },
            "brokers": {
  "type": ["object", "null"],
  "properties": {
    "listingBrokerage": { "type": ["string", "null"] },
    "listingAgent": { "type": ["string", "null"] },
    "listingAgentEmail": { "type": ["string", "null"], "format": "email" },
    "listingAgentPhone": { "type": ["string", "null"] },
    "sellingBrokerage": { "type": ["string", "null"] },
    "sellingAgent": { "type": ["string", "null"] },
    "sellingAgentEmail": { "type": ["string", "null"], "format": "email" },
    "sellingAgentPhone": { "type": ["string", "null"] }
  },
  "additionalProperties": false
            },
            "personalPropertyIncluded": {
              "type": ["array", "null"],
              "items": { "type": "string" }
            },
            "buyerSignatureDates": {
              "type": ["array", "null"],
              "items": { "type": "string" },
              "description": "Buyer signature dates EXACTLY as written on THIS page. Do NOT normalize format. Extract ALL visible."
            },
            "sellerSignatureDates": {
              "type": ["array", "null"],
              "items": { "type": "string" },
              "description": "Seller signature dates EXACTLY as written on THIS page. Do NOT normalize format. Extract ALL visible."
            },
            "escrowHolder": {
              "type": ["string", "null"]
            },
            "additionalTerms": {
               "type": ["array", "null"],
                "items": { "type": "string" },
               "description": "List of important additional or other terms from this page. Extract bullet points, numbered items, or full paragraphs from 'Other Terms', 'Additional Provisions', or similar sections. Include any negotiated changes not covered by structured fields (e.g., repair credits, rent-backs, custom contingencies, fee allocations)."
           },
            "confidence": {
              "type": "object",
              "properties": {
                "overall": { "type": "integer", "minimum": 0, "maximum": 100 },
                "fieldScores": {
                  "type": "object",
                  "additionalProperties": { "type": "integer", "minimum": 0, "maximum": 100 }
                },
                "sources": {
                  "type": "object",
                  "additionalProperties": { "type": "string" }
                }
              },
              "required": ["overall", "sources"]
            }
          },
          "required": ["confidence"]
        }
      }
    },
    "required": ["extractions"],
    "additionalProperties": false
  }
}